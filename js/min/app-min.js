function shuffle(a){for(var t=a.length,e,l;0!==t;)l=Math.floor(Math.random()*t),t-=1,e=a[t],a[t]=a[l],a[l]=e;return a}function shuffleCards(){$.ajax({url:"http://namegame.willowtreemobile.com:2000",success:function(a){var t=0;shuffle(a),$(".game-number").text(gameNumber),$("#eGame").html(""),$.each(a,function(a,e){var l='<li class="card"><div id="'+t+'" class="willow-card"><div class="back face center"><span class="willow-logo"></span></div><div class="front face"><img src="'+e.url+'"</img><h2>'+e.name+"</h2></div></div></li>";return eGroup.push(l),$("#eGame").append(l),t++,totalCards>a}),shuffle(eGroup),$("#eGame").append(eGroup),eGroup=[],$(".willow-card").click(cardVerify)}})}function cardVerify(){function a(){numFlips>=2&&($(".willow-card").delay(timerClock).removeClass("flipped"),cardB=null,numFlips=0,0!==totalScore&&(totalScore-=20))}var t=$(this).closest("div.match");cardA=$(this).attr("id"),numFlips++,totalClicks++,2>=numFlips&&$(this).addClass("flipped"),t.length?(numFlips--,totalClicks--):cardA===cardB?($(".flipped").addClass("match"),$(".willow-card").delay(timerClock).removeClass("flipped"),totalMatches++,totalScore+=100,numFlips=0):(cardB=cardA,setTimeout(a,timerClock)),$(".total-clicks").text(totalClicks),$(".total-score").text(totalScore),totalMatches>totalCards&&(setTimeout(function(){$("#youWon-modal").foundation("reveal","open")},1500),totalMatches=0)}function cleanDeck(){shuffleCards(),$("#youWon-modal").foundation("reveal","close"),gameNumber++,numFlips=0}$(document).foundation(),$(document).ready(shuffleCards);var totalCards=4,eGroup=[],numFlips=0,cardA=null,cardB=null,timerClock=3e3,totalMatches=0,totalScore=0,totalClicks=0,gameNumber=1;$("#instructions-button").click(function(){$(".game-instructions").toggleClass("view-me"),$(this).text($(".game-instructions").hasClass("view-me")?"Hide Instructions":"View Instructions")}),$("#reload-game").on("click",cleanDeck);